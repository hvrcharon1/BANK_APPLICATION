REM SCRIPT TO CREATE TABLES OF BANK APP.

REM ********* DROP ALL TABLES *************

DROP TABLE TRANS  CASCADE CONSTRAINTS;
DROP TABLE  CHEQUEBOOKS CASCADE CONSTRAINT;
DROP TABLE  AVA_CHEQUEBOOKS CASCADE CONSTRAINT;
DROP TABLE  ACCOUNTS CASCADE CONSTRAINT;

REM  ******  CREATE TABLES. MOST INDEPENDENT TABLES FIRST  ****


REM  *********  ACCOUNTS  ****************

CREATE TABLE ACCOUNTS
( ACNO NUMBER(5)
        CONSTRAINT ACCOUNTS_PK PRIMARY KEY,
  NAME  VARCHAR2(20) 
       CONSTRAINT ACCOUNTS_NAME_NN NOT NULL,
  DO    DATE,
  ATYPE CHAR(1) 
        CONSTRAINT ACCOUNTS_ATYPE_CHK
        CHECK ( ATYPE IN ('S','C')),
 CURBAL NUMBER(10,2),
  CF    CHAR(1) DEFAULT  'N'
        CONSTRAINT ACCOUNTS_CF_CHK
        CHECK ( CF IN ('Y','N'))
);

REM  *********  CHEQUEBOOKS  **********

CREATE TABLE CHEQUEBOOKS 
( ACNO  NUMBER(5)  
        CONSTRAINT CHEQUEBOOKS_ACNO_FK
        REFERENCES ACCOUNTS(ACNO),
  CBNO  NUMBER(5)
        CONSTRAINT CHEQUEBOOKS_PK 
        PRIMARY KEY,
  DI    DATE,
  SCNO  NUMBER(5), 
  ECNO  NUMBER(5),
  CONSTRAINT CHEQUEBOOKS_SCNO_ECNO_CHK
      CHECK ( SCNO <= ECNO)
);

REM  *********  AVA_CHEQUEBOOKS  **********

CREATE TABLE AVA_CHEQUEBOOKS 
(CBNO  NUMBER(5)
        CONSTRAINT AVA_CHEQUEBOOKS_PK 
        PRIMARY KEY,
  SCNO  NUMBER(5), 
  ECNO  NUMBER(5),
  CONSTRAINT AVA_CHEQUEBOOKS_SCNO_ECNO_CHK
      CHECK ( SCNO <= ECNO)
);

REM  *********  TRANS  **********

CREATE TABLE TRANS
(TNO   NUMBER(10) 
       CONSTRAINT TRANS_PK PRIMARY KEY, 
 ACNO  NUMBER(5)
       CONSTRAINT TRANS_ACNO_FK
       REFERENCES ACCOUNTS(ACNO),
 DT    DATE,
 TTYPE CHAR(1) CONSTRAINT TRANS_TTYPE_CHK
        CHECK ( TTYPE IN ('D','W')),
 TAMT  NUMBER(10,2),
 CQNO  NUMBER(10),
 CQBANK VARCHAR2(20),
 CQACNO NUMBER(5),
 CQTO   VARCHAR2(20)
); 
